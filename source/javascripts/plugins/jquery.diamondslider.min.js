!function(a){"use strict";a.diamondslider=function(b,c){var d=a(b),e={};d.vars=a.extend({},a.diamondslider.defaults,c),e={init:function(){d.find(".slides .shape").addClass("active"),1==d.vars.sliding&&d.append('<ul class="diamond-dir-nav"><li class="diamond-prev-nav"><a href="#"></a></li><li class="diamond-next-nav"><a href="#"></a></li></ul>'),d.container=d.find(".slides"),d.prevNav=d.find(".diamond-dir-nav .diamond-prev-nav"),d.nextNav=d.find(".diamond-dir-nav .diamond-next-nav"),d.filter=d.vars.filter,d.filterSelector=d.vars.filterSelector,d.container.wrap("<div class='diamond-viewport'></div>"),d.setup(),1==d.vars.sliding&&d.navigation(),a(window).bind("resize orientationchange",e.resize),1==d.filter&&a(d.filterSelector).on("click","a",e.filter)},resize:function(){d.reset(),d.navActivity()},filter:function(b){var c=a(this).attr("data-filter");a(d.filterSelector).find("ul .active").removeClass("active"),a(this).closest("li").addClass("active"),d.container.find("li").each(function(){var b=a(this).attr("data-category").split(" ");"*"===c?(a(this).addClass("active"),a(this).attr("data-animation","bounceInRotated").attr("data-animation-delay","0s").css("animation-delay","0s").removeClass("bounceOutRotated").addClass("bounceInRotated")):jQuery.inArray(c,b)!==-1?(a(this).show(300),a(this).attr("data-animation","bounceInRotated").attr("data-animation-delay","0s").css("animation-delay","0s").removeClass("bounceOutRotated").addClass("bounceInRotated")):(a(this).removeClass("active"),a(this).attr("data-animation","bounceOutRotated").attr("data-animation-delay","0s").css("animation-delay","0s").removeClass("bounceInRotated").addClass("bounceOutRotated"))}),setTimeout(e.resize,500),b.preventDefault()},destroy:function(){}},d.setup=function(){d.doMath(),d.doCSS();var a=0,b=d.activeN,c=d.rowOddN,e=d.rowEvenN;if(2==d.rowsN&&b>d.rowEvenN&&b-d.rowEvenN<d.rowEvenN){var f=Math.ceil((d.rowEvenN-(b-d.rowEvenN))/2);c=b-d.rowEvenN+f,e=d.rowEvenN-f}var g=0;for(d.slidingSlides=0;;){var h=(d.shapeW+d.gutter)/2,i=(d.shapeW+d.gutter)/2,j=0;1==d.rowsN&&(i=0);for(var k=0;k<d.rowsN;k++)if(k%2==0){b<d.rowEvenN?j=Math.floor((d.rowEvenN-b)/2)*(d.shapeW+d.gutter):e<d.rowEvenN&&(j=Math.floor((d.rowEvenN-e)/2)*(d.shapeW+d.gutter));for(var l=0;l<e;l++)d.active.eq(a).css({left:d.initOffset+(i+(d.shapeW+d.gutter)*l+j)+g,top:d.initOffset+h*k,display:"block"}),a++,b--}else{b<d.rowOddN&&(j=Math.floor((d.rowOddN-b)/2)*(d.shapeW+d.gutter));for(var l=0;l<c;l++)d.active.eq(a).css({left:d.initOffset+((d.shapeW+d.gutter)*l+j)+g,top:d.initOffset+h*k,display:"block"}),a++,b--}if(g+=d.viewportW,d.slidingSlides++,d.vars.sliding===!1||b<=0)break}},d.reset=function(){d.container.css({transform:"translate3d(0,0,0)","-webkit-transform":"translate3d(0,0,0)"}),d.navActivity()},d.doCSS=function(){d.find(".diamond-viewport").css({width:d.viewportW,"margin-left":(d.w-d.viewportW)/2}),d.container.animate({height:d.h,width:d.slidingSlides*d.viewportW},400)},d.doMath=function(){if(d.offset=0,d.active=d.container.find(".active"),d.w=d.width(),d.initOffset=.2*d.find(".shape").width(),d.shapeW=1.4*d.find(".shape").width(),d.gutter=d.vars.gutterWidth,d.itemN=d.find(".shape").length,d.activeN=d.active.length,d.rowsN=d.vars.rows,d.rowEvenN=Math.floor((d.w-d.shapeW)/(d.shapeW+d.gutter)),d.rowOddN=Math.floor((d.w+d.gutter)/(d.shapeW+d.gutter)),a(window).width()<=2*(d.shapeW+d.gutter)&&1==d.vars.sliding&&(d.rowEvenN=d.rowOddN=1),d.viewportW=d.rowOddN*d.shapeW+(d.rowOddN-1)*d.gutter,"auto"===d.rowsN){for(var b=d.activeN,c=0;;){if(b<=0)break;b-=c%2==0?d.rowEvenN:d.rowOddN,c++}d.rowsN=c}if(a(window).width()<=2*(d.shapeW+d.gutter)&&1==d.vars.sliding&&(d.rowsN=1),1==d.rowsN&&(d.viewportW=d.rowEvenN*d.shapeW+(d.rowEvenN-1)*d.gutter),(d.rowsN-1)%2==0){var c=d.rowsN/2+.5;1==d.rowsN&&(c=1),d.h=c*(d.shapeW+d.gutter)-12}else{var c=(d.rowsN-1)/2+1;d.h=c*(d.shapeW+d.gutter)-12}},d.navActivity=function(){0==d.offset?d.prevNav.addClass("inactive"):d.prevNav.removeClass("inactive"),d.offset+d.viewportW==d.slidingSlides*d.viewportW?d.nextNav.addClass("inactive"):d.nextNav.removeClass("inactive")},d.doNav=function(a){var b=function(){return"prev"===a?(0!=d.offset?d.offset-=d.viewportW:d.offset-=0,d.navActivity()):"next"===a&&(d.offset+d.viewportW!=d.slidingSlides*d.viewportW?d.offset+=d.viewportW:d.offset+=0,d.navActivity()),d.offset*-1+"px"},c=b(),e=function(){d.container.css({"-webkit-transform":"translate3d("+c+", 0px, 0px)","-moz-transform":"translate3d("+c+", 0px, 0px)","-o-transform":"translate3d("+c+", 0px, 0px)","-ms-transform":"translate3d("+c+", 0px, 0px)",transform:"translate3d("+c+", 0px,0px)"})},f=function(){d.container.stop(!0,!0).animate({left:c},1e3,"easeInOutExpo")};Modernizr.csstransforms3d?e():f()},d.navigation=function(){d.navActivity(),d.prevNav.on("click","a",function(a){d.doNav("prev"),a.preventDefault()}),d.nextNav.on("click","a",function(a){d.doNav("next"),a.preventDefault()}),d.swipe({swipeLeft:function(a,b,c,e,f){d.doNav("next")},swipeRight:function(a,b,c,e,f){d.doNav("prev")},threshold:0})},e.init()},a.diamondslider.defaults={rows:"auto",gutterWidth:12,sliding:!1,filter:!1,filterSelector:"#diamond-filter"},a.fn.diamondslider=function(b){if(void 0===b&&(b={}),"object"==typeof b)return this.each(function(){new a.diamondslider(this,b)})}}(jQuery);